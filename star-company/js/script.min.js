document.addEventListener("DOMContentLoaded",()=>{const e=Array.from(document.querySelectorAll(".hero__form-step")),t=document.querySelector(".hero__form"),o=t.querySelector(".mainBtn"),r=t.querySelector(".btn__prev"),d=t.querySelector("input[type=password]"),s=document.querySelector(".header__btn"),n=document.querySelector(".header__form"),a=document.querySelectorAll('input[type="email"]'),c=document.querySelector(".hero__form-progress"),l=/^([\w\.\+]{1,})([^\W])(@)([\w]{1,})(\.[\w]{1,})+$/;let i=0;for(step in a.forEach(e=>{e.addEventListener("input",t=>{let o=t.target.value;const r=e.closest(".email-wrapper"),d=e.closest(".form").querySelector(".mainBtn");l.test(o)?(r.classList.remove("invalid"),d.disabled=!1):(r.classList.add("invalid"),d.disabled=!0)})}),document.querySelector("button[disabled]").addEventListener("mouseenter",()=>{alert("123")}),s.addEventListener("click",e=>{n.classList.remove("hidden"),s.classList.add("hidden")}),e){const e=document.createElement("li");e.classList.add("hero__form-dot"),c.append(e)}const m=Array.from(document.querySelectorAll(".hero__form-dot"));function u(t){const d=document.querySelector(".hero__form-step.active"),s=e[t];d.classList.remove("active"),s.classList.add("active"),document.querySelector(".hero__form-step.email-wrapper.active")&&(o.disabled=!0,r.addEventListener("click",()=>o.disabled=!1)),t===e.length-1&&(o.disabled=!0,o.innerText="Start now")}var _,p;m[0].classList.add("hero__form-dot_complete"),t.addEventListener("click",t=>{t.target.matches(".btn_next")&&i>=0&&i<e.length-1&&(i++,u(i),m[i].classList.add("hero__form-dot_complete")),t.target.matches(".btn__prev")&&i>0&&(i--,u(i),m[i+1].classList.remove("hero__form-dot_complete"))}),d.addEventListener("input",e=>{e.target.value.length>5?(o.classList.remove("btn_next"),o.classList.add("btn_done"),o.disabled=!1,o.type="submit"):(o.classList.add("btn_next"),o.classList.remove("btn_done"),o.disabled=!0,o.type="button")}),t.addEventListener("submit",async e=>{e.preventDefault(),fetch("http://www.mocky.io/v2/5dfcef48310000ee0ed2c281",{method:"POST",body:new FormData(t)}).then(e=>{t.reset(),i=0,u(i),alert("data successfully sent")})}),_=function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")},(p=new Image).onload=p.onerror=function(){_(2==p.height)},p.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"});